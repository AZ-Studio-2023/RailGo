<Page
    x:Class="RailGo.Views.Pages.StationToStation.StationToStationPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ui="using:CommunityToolkit.WinUI"
    xmlns:SettingsControls="using:CommunityToolkit.WinUI.Controls"
    xmlns:controls="using:CommunityToolkit.WinUI.UI.Controls"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:behaviors="using:CommunityToolkit.WinUI.Behaviors"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    mc:Ignorable="d">
    <Grid x:Name="ContentArea">
        <StackPanel Orientation="Vertical">
            <StackPanel Spacing="10">
                <StackPanel Orientation="Horizontal" x:Name="SelectStationArea" Spacing="10" HorizontalAlignment="Center">
                    <StackPanel Orientation="Vertical">
                        <TextBlock VerticalAlignment="Center"><Bold>始发站：</Bold></TextBlock>
                        <HyperlinkButton x:Name="OpenStationSelector_FromStation" Click="OpenStationSelector_FromStation_Click">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBox IsReadOnly="True" PlaceholderText="请选择一个车站" Text="{x:Bind ViewModel.FromStation.Name, Mode=OneWay}"/>
                                <FontIcon Glyph="&#xE721;" />
                            </StackPanel>
                        </HyperlinkButton>
                    </StackPanel>
                    <Button HorizontalAlignment="Center" Click="SwitchFromAndToButton_Click">
                        <FontIcon Glyph="&#xE8AB;" RenderTransformOrigin="0.5,0.5" Margin="3">
                        </FontIcon>
                    </Button>
                    <StackPanel Orientation="Vertical">
                        <TextBlock VerticalAlignment="Center"><Bold>终到站：</Bold></TextBlock>
                        <HyperlinkButton x:Name="OpenStationSelector_ToStation" Click="OpenStationSelector_ToStation_Click">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <TextBox IsReadOnly="True" PlaceholderText="请选择一个车站" Text="{x:Bind ViewModel.ToStation.Name, Mode=OneWay}"/>
                                <FontIcon Glyph="&#xE721;" />
                            </StackPanel>
                        </HyperlinkButton>
                    </StackPanel>
                    <CalendarDatePicker PlaceholderText="选择日期" HorizontalAlignment="Center"/>
                    <Button HorizontalAlignment="Stretch" 
                        Content="查询" 
                        Style="{StaticResource AccentButtonStyle}"
                        Click="SearchButton_Click"/>
                </StackPanel>
                <Popup 
                    x:Name="SelectTeachingTip"
                    IsOpen="{x:Bind ViewModel.SelectTeachingTipIsOpen, Mode=TwoWay}">
                    <Border Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="8"
                        Padding="20"
                        BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}"
                        BorderThickness="1">
                        <StackPanel Orientation="Vertical">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{x:Bind ViewModel.ContentText, Mode=OneWay}" FontSize="16" HorizontalAlignment="Left"/>
                                <Button HorizontalAlignment="Right" Click="CloseStationChooseButton_Click">
                                    <FontIcon Glyph="&#xE711;" />
                                </Button>
                            </StackPanel>
                            <Frame x:Name="PageFrame"/>
                        </StackPanel>
                    </Border>
                </Popup>
            </StackPanel>
            <StackPanel Margin="60,0,0,10" Spacing="10" VerticalAlignment="Stretch">

                <controls:DataGrid ItemsSource="{x:Bind ViewModel.TrainResults, Mode=OneWay}"
                  AutoGenerateColumns="False"
                  Height="600">

                    <controls:DataGrid.Columns>
                        <controls:DataGridTextColumn Header="车次" Binding="{Binding Number}" />
                        <controls:DataGridTextColumn Header="类型" Binding="{Binding NumberKind}" />
                        <controls:DataGridTextColumn Header="起点" Binding="{Binding FromStationTelecode}" />
                        <controls:DataGridTextColumn Header="终点" Binding="{Binding ToStationTelecode}" />
                        <controls:DataGridTextColumn Header="里程" Binding="{Binding DayDiff}" />
                        <controls:DataGridTextColumn Header="运行时间" Binding="{Binding PassTime}" />
                    </controls:DataGrid.Columns>

                </controls:DataGrid>

            </StackPanel>

        </StackPanel>
    </Grid>
</Page>
